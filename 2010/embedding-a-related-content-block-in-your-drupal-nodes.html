<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Embedding a 'Related Content' block in your Drupal nodes</title>
  <meta name="description" content="Many of my favorite websites offer a nice little feature, immediately following the body of the page, that highlights 3-5 &quot;possibly related&quot; storie...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://www.opensourcecatholic.com/2010/embedding-a-related-content-block-in-your-drupal-nodes">
  <link rel="alternate" type="application/rss+xml" title="Open Source Catholic" href="http://www.opensourcecatholic.com/rss.xml">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" >
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
</head>


  <body>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2478239-10', 'auto');
  ga('send', 'pageview');

</script>


    <header class="site-header">

  <div class="wrapper">
    <a class="site-title" href="/"><img src="/sites/opensourcecatholic.com/files/airyblue-logo.png" width="100" height="97" alt="Open Source Catholic Logo"> Open Source Catholic</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
        <a class="page-link" href="/about/">About</a>
        
        <a class="page-link" href="/archive/">Archive</a>
        
        <a class="page-link" href="/chat/">Chat</a>
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Embedding a 'Related Content' block in your Drupal nodes</h1>
    <p class="post-meta">
      <time datetime="2010-11-11T00:00:00+00:00" itemprop="datePublished">Nov 11, 2010</time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeff Geerling</span></span>
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Many of my favorite websites offer a nice little feature, immediately following the body of the page, that highlights 3-5 &quot;possibly related&quot; stories or blog posts. I wanted to do this on OSC and some other sites, but found that it&#39;s difficult to add regions inside of nodes&mdash;the closest I could get with the default theme/block behavior is to have it appear after comment section, which is too far down the page to be relevant.</p>
<p>I decided to use the <a href="http://drupal.org/project/featured_content">Featured Content</a> module to create my blocks, as it offers a good amount of customization as to what kind of algorithms it uses to find related nodes... performance considerations aside. There are other ways to go about creating lists of related nodes, but this was quick and easy.</p>
<p>Adapting a solution I found <a href="http://drupal.org/node/753516#comment-2769068">here</a>, I created a simple function inside my template.php file that allowed me to print a block from inside my node.tpl.php template.</p>
<p>Inside template.php:</p>
<p>&lt;?php
/**</p>
<ul>
  <li>Helper function for retrieving block code for insertion into templates.
 *</li>
  <li>@see http://drupal.org/node/753516#comment-2769068
 */
function osc_block_retrieve($module, $delta) {
  $block = (object) module_invoke($module, ‘block’, ‘view’, $delta);
  $block-&gt;module = $module;
  $block-&gt;delta = $delta;
  return theme(‘block’, $block);
}
?&gt;</li>
</ul>
<p>Inside node.tpl.php:</p>
<p><code>
&lt;?php
  &lt;?php if ($page): ?&gt;
    &lt;div class="block-in-node"&gt;
      &lt;?php print osc_block_retrieve('featured_content', '1'); ?&gt;
    &lt;/div&gt;
  &lt;?php endif; ?&gt;
?&gt;
</code></p>
<p>I chose to rank related nodes first by similar taxonomy terms, then by how many views the node received (I&#39;m using the statistics module on this site).</p>
<p>Alternatively, you could do one of the following to accomplish the same kind of thing:</p>
<ul>
<li>Set up a region inside your nodes, in the node.tpl.php file. This seems to be a little burdensome, though, unless you&#39;re planning on doing many different things inside said region(s).</li>
<li>Use the <a href="http://drupal.org/project/panels">Panels</a> module to add blocks inside of nodes, or in a different kind of page layout.</li>
</ul>

  </div>


  <div class="post-comments">
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      
        
        this.page.url = "http://www.opensourcecatholic.com/blog/oscatholic/embedding-related-conten/";
        this.page.identifier = "node/352";
      
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = '//opensourcecatholic.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>



</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Open Source Catholic</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <p class="rss-subscribe">Subscribe <a href="/rss.xml">via RSS</a></p>
        <ul class="social-media-list">
          
          <li>
            <a href="https://groups.google.com/forum/#!forum/open-source-catholic"><i class="fas fa-envelope"></i> <span class="username">open-source-catholic</span></a>

          </li>
          

          
          <li>
            <a href="https://github.com/opensourcecatholic"><i class="fab fa-github"></i> <span class="username">opensourcecatholic</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/oscatholic"><i class="fab fa-twitter"></i> <span class="username">oscatholic</span></a>

          </li>
          

          <li>
            <a href="https://catholicdevs.slack.com"><i class="fab fa-slack"></i> <span class="username">catholicdevs</span></a>

          </li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <p>Helping Catholic developers and organizations involved in software and web development find effective solutions for spreading the Gospel of Jesus Christ.
</p>
      </div>

    </div>

  </div>

</footer>


    <script id="dsq-count-scr" src="//opensourcecatholic.disqus.com/count.js" async></script>
  </body>

</html>
