<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Drupal ImageCache - Display Alt Text as Caption</title>
  <meta name="description" content="	While building the Archdiocese of Saint Louis&#39; website (launching Feb. 22, 2010), I needed an easy and quick way to allow users to caption images, witho...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://www.opensourcecatholic.com/2010/drupal-imagecache-display-alt-text-as-caption">
  <link rel="alternate" type="application/rss+xml" title="Open Source Catholic" href="http://www.opensourcecatholic.com/rss.xml">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" >
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
</head>


  <body>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2478239-10', 'auto');
  ga('send', 'pageview');

</script>


    <header class="site-header">

  <div class="wrapper">
    <a class="site-title" href="/"><img src="/sites/opensourcecatholic.com/files/airyblue-logo.png" width="100" height="97" alt="Open Source Catholic Logo"> Open Source Catholic</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
        <a class="page-link" href="/about/">About</a>
        
        <a class="page-link" href="/archive/">Archive</a>
        
        <a class="page-link" href="/chat/">Chat</a>
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Drupal ImageCache - Display Alt Text as Caption</h1>
    <p class="post-meta">
      <time datetime="2010-02-20T00:00:00+00:00" itemprop="datePublished">Feb 20, 2010</time> â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeff Geerling</span></span>
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>
	While building the Archdiocese of Saint Louis&#39; website (launching Feb. 22, 2010), I needed an easy and quick way to <strong>allow users to caption images, without much hassle</strong>. On the old Joomla version of the website, users would have to upload an image, then insert it, then click on it, then click another button to add an image caption, set border properties, add padding, etc.</p>
<p>
	To cut through most of that mess, I set up an <a href="http://drupal.org/project/imagefield">ImageField</a> with Drupal&#39;s <a href="http://drupal.org/project/insert">Insert</a> module, which helps save a few clicks (and eliminates any need for users to navigate through directories and manage yet another set of files on the server itself&mdash;this approach is not altogether bad, but can be harder to teach to many people). But how to do image captions?</p>
<p>
	Easy! Just create an <a href="http://drupal.org/project/imagecache">ImageCache</a> preset that can be used by the Insert module when an image is inserted, and use a theme function (inside your Drupal theme&#39;s <strong>template.php</strong> file) to grab the Alternate text and convert it to a caption.</p>
<p>
<?php
/**
 * Add a caption to imagefield pictures with an 'alt' tag
 */
function archstl_imagecache($namespace, $path, $alt = '', $title = '', $attributes = NULL) {
  if ($path) {
		$attributes = drupal_attributes($attributes);
	  $imagecache_path = file_create_url(file_directory_path() .'/imagecache/'. $namespace .'/'. $path);
	  $output = '<img src="'. $imagecache_path .'" alt="'. check_plain($alt) .'" title="'. check_plain($title) .'" '. $attributes .' />';
	  $output .= '<div class="caption">'. check_plain($alt) .'</div>';
	  return $output;
	}
}
?></p>
<p>
	One downside to this approach is the fact that users won&#39;t be able to see the caption while they&#39;re editing the page... but I might figure out something to fix that, perhaps with a JavaScript plugin for the TinyMCE editor (we use the WYSIWYG module to set up editor profiles on the new site).</p>
<p>
	[UPDATE: This is not quite working for me right now... works great for imagecache-built CCK ImageFields, but not with inserted images... might have to resort to a JavaScript-only solution for the time being.]</p>
<p>
	The new Archdiocesan website will launch on Monday, February 22... stay tuned!</p>

  </div>


  <div class="post-comments">
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      
        
        this.page.url = "http://www.opensourcecatholic.com/blog/oscatholic/drupal-imagecache-displa/";
        this.page.identifier = "node/212";
      
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = '//opensourcecatholic.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>



</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Open Source Catholic</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <p class="rss-subscribe">Subscribe <a href="/rss.xml">via RSS</a></p>
        <ul class="social-media-list">
          
          <li>
            <a href="https://groups.google.com/forum/#!forum/open-source-catholic"><i class="fas fa-envelope"></i> <span class="username">open-source-catholic</span></a>

          </li>
          

          
          <li>
            <a href="https://github.com/opensourcecatholic"><i class="fab fa-github"></i> <span class="username">opensourcecatholic</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/oscatholic"><i class="fab fa-twitter"></i> <span class="username">oscatholic</span></a>

          </li>
          

          <li>
            <a href="https://catholicdevs.slack.com"><i class="fab fa-slack"></i> <span class="username">catholicdevs</span></a>

          </li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <p>Helping Catholic developers and organizations involved in software and web development find effective solutions for spreading the Gospel of Jesus Christ.
</p>
      </div>

    </div>

  </div>

</footer>


    <script id="dsq-count-scr" src="//opensourcecatholic.disqus.com/count.js" async></script>
  </body>

</html>
